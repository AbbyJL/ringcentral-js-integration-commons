{"version":3,"sources":["integration-test/commons/Phone/index.js"],"names":["Phone","history","appKey","appSecret","server","appName","appVersion","brandId","brandName","brandFullName","redirectUri","proxyUri","options","cachePrefix","prefix","addModule","getState","state","tabManager","globalStorage","alert","id","name","fullName","brand","locale","sdkConfig","client","environment","checkConnectionFunc","connectivityMonitor","auth","storage","subscription","extensionInfo","rolesAndPermissions","accountInfo","presence","accountExtension","accountPhoneNumber","dialingPlan","extensionPhoneNumber","forwardingNumber","blockedNumber","regionSettings","rateLimiter","contactMatcher","activityMatcher","onFirstLogin","router","push","callingSettings","softphone","ringout","numberValidate","call","contactSearch","addSearchSource","sourceName","searchFn","searchString","entityType","phoneNumber","phoneType","formatFn","entities","readyCheckFn","messageSender","composeText","messageStore","conversation","messages","_reducer","app","version","reducer"],"mappings":"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","file":"index.js","sourcesContent":["import RingCentral from 'ringcentral';\nimport RingCentralClient from 'ringcentral-client';\nimport { combineReducers } from 'redux';\n\nimport RcModule from '../../../lib/RcModule';\nimport AccountExtension from '../../../modules/AccountExtension';\nimport AccountInfo from '../../../modules/AccountInfo';\nimport Alert from '../../../modules/Alert';\nimport Auth from '../../../modules/Auth';\nimport AccountPhoneNumber from '../../../modules/AccountPhoneNumber';\nimport Brand from '../../../modules/Brand';\nimport BlockedNumber from '../../../modules/BlockedNumber';\nimport Call from '../../../modules/Call';\nimport CallingSettings from '../../../modules/CallingSettings';\nimport ConnectivityMonitor from '../../../modules/ConnectivityMonitor';\nimport DialingPlan from '../../../modules/DialingPlan';\nimport Environment from '../../../modules/Environment';\nimport ExtensionInfo from '../../../modules/ExtensionInfo';\nimport ExtensionPhoneNumber from '../../../modules/ExtensionPhoneNumber';\nimport ForwardingNumber from '../../../modules/ForwardingNumber';\nimport GlobalStorage from '../../../modules/GlobalStorage';\nimport Locale from '../../../modules/Locale';\nimport Presence from '../../../modules/Presence';\nimport RateLimiter from '../../../modules/RateLimiter';\nimport RegionSettings from '../../../modules/RegionSettings';\nimport Ringout from '../../../modules/Ringout';\nimport RolesAndPermissions from '../../../modules/RolesAndPermissions';\nimport Softphone from '../../../modules/Softphone';\nimport Storage from '../../../modules/Storage';\nimport Subscription from '../../../modules/Subscription';\nimport TabManager from '../../../modules/TabManager';\n// import RouterInteraction from 'ringcentral-js-widget/modules/RouterInteraction';\n\nimport NumberValidate from '../../../modules/NumberValidate';\nimport MessageSender from '../../../modules/MessageSender';\nimport ComposeText from '../../../modules/ComposeText';\nimport ContactSearch from '../../../modules/ContactSearch';\n\nimport Messages from '../../../modules/Messages';\nimport MessageStore from '../../../modules/MessageStore';\nimport Conversation from '../../../modules/Conversation';\n\nimport ContactMatcher from '../../../modules/ContactMatcher';\nimport ActivityMatcher from '../../../modules/ActivityMatcher';\n\n// import DynamicsAdapter from '../../../modules/DynamicsInteraction';\n\n// import { callMonitorReducer } from '../CallMonitor/reducers';\n\n\n// import CallLog from '../CallLog';\n// import AutoLogger from '../AutoLogger';\n// import DataMatcher from '../DataMatcher';\n\n\nexport default class Phone extends RcModule {\n  constructor({\n    history,\n    appKey,\n    appSecret,\n    server,\n    appName,\n    appVersion,\n    brandId,\n    brandName,\n    brandFullName,\n    redirectUri,\n    proxyUri,\n    ...options\n  } = {}) {\n    super({\n      ...options,\n    });\n\n    const cachePrefix = `sdk${options.prefix ? `-${options.prefix}` : ''}`;\n\n    this.addModule('client', new RingCentralClient(new RingCentral({\n      cachePrefix,\n      appKey,\n      appSecret,\n      appName,\n      appVersion,\n      server,\n    })));\n    this.addModule('tabManager', new TabManager({\n      ...options,\n      getState: () => this.state.tabManager,\n    }));\n    this.addModule('globalStorage', new GlobalStorage({\n      ...options,\n      getState: () => this.state.globalStorage,\n    }));\n    this.addModule('alert', new Alert({\n      ...options,\n      getState: () => this.state.alert,\n    }));\n\n    this.addModule('brand', new Brand({\n      ...options,\n      id: brandId,\n      name: brandName,\n      fullName: brandFullName,\n      getState: () => this.state.brand,\n    }));\n    this.addModule('locale', new Locale({\n      ...options,\n      getState: () => this.state.locale,\n    }));\n    this.addModule('environment', new Environment({\n      ...options,\n      sdkConfig: {\n        cachePrefix,\n        appKey,\n        appSecret,\n        appName,\n        appVersion,\n        server,\n      },\n      client: this.client,\n      globalStorage: this.globalStorage,\n      getState: () => this.state.environment,\n    }));\n    this.addModule('connectivityMonitor', new ConnectivityMonitor({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      environment: this.environment,\n      checkConnectionFunc: () => true,\n      getState: () => this.state.connectivityMonitor,\n    }));\n    this.addModule('auth', new Auth({\n      ...options,\n      client: this.client,\n      brand: this.brand,\n      locale: this.locale,\n      alert: this.alert,\n      environment: this.environment,\n      tabManager: this.tabManager,\n      proxyUri,\n      redirectUri,\n      getState: () => this.state.auth,\n    }));\n    this.addModule('storage', new Storage({\n      ...options,\n      auth: this.auth,\n      getState: () => this.state.storage,\n    }));\n    this.addModule('subscription', new Subscription({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      getState: () => this.state.subscription,\n    }));\n    // this.addModule('router', new RouterInteraction({\n    //   ...options,\n    //   history,\n    //   getState: () => this.state.router,\n    // }));\n    this.addModule('extensionInfo', new ExtensionInfo({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      tabManager: this.tabManager,\n      alert: this.alert,\n      getState: () => this.state.extensionInfo,\n    }));\n    this.addModule('rolesAndPermissions', new RolesAndPermissions({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      extensionInfo: this.extensionInfo,\n      tabManager: this.tabManager,\n      alert: this.alert,\n      getState: () => this.state.rolesAndPermissions,\n    }));\n    this.addModule('accountInfo', new AccountInfo({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      alert: this.alert,\n      getState: () => this.state.accountInfo,\n    }));\n    this.addModule('presence', new Presence({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      subscription: this.subscription,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.presence,\n    }));\n    this.addModule('accountExtension', new AccountExtension({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      subscription: this.subscription,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.accountExtension,\n    }));\n    this.addModule('accountPhoneNumber', new AccountPhoneNumber({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      subscription: this.subscription,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.accountPhoneNumber,\n    }));\n    this.addModule('dialingPlan', new DialingPlan({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.dialingPlan,\n    }));\n    this.addModule('extensionPhoneNumber', new ExtensionPhoneNumber({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.extensionPhoneNumber,\n    }));\n    this.addModule('forwardingNumber', new ForwardingNumber({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.forwardingNumber,\n    }));\n    this.addModule('blockedNumber', new BlockedNumber({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.blockedNumber,\n    }));\n    this.addModule('regionSettings', new RegionSettings({\n      ...options,\n      storage: this.storage,\n      alert: this.alert,\n      extensionInfo: this.extensionInfo,\n      dialingPlan: this.dialingPlan,\n      tabManager: this.tabManager,\n      getState: () => this.state.regionSettings,\n    }));\n    this.addModule('rateLimiter', new RateLimiter({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      environment: this.environment,\n      globalStorage: this.globalStorage,\n      getState: () => this.state.rateLimiter,\n    }));\n\n    this.addModule('contactMatcher', new ContactMatcher({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      getState: () => this.state.contactMatcher,\n    }));\n    this.addModule('activityMatcher', new ActivityMatcher({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      getState: () => this.state.activityMatcher,\n    }));\n    // this.addModule('callLog', new CallLog({\n    //   ...options,\n    //   auth: this.auth,\n    //   client: this.client,\n    //   storage: this.storage,\n    //   regionSettings: this.regionSettings,\n    //   onFetchSuccess: () => {\n    //     this.contactMatcher.triggerMatch();\n    //     this.activityMatcher.triggerMatch();\n    //   },\n    //   getState: () => this.state.callLog,\n    // }));\n    // this.contactMatcher.addQuerySource({\n    //   sourceName: 'callLog',\n    //   getQueriesFn: this.callLog.getSelector('normalizedPhoneNumbers'),\n    //   readyCheckFn: () => this.callLog.ready,\n    // });\n    // this.contactMatcher.addSearchSource({\n    //   sourceName: 'dynamics',\n    //   searchFn: async ({ queries }) => this.adapter.matchEntities({ phoneNumbers: queries }),\n    //   readyCheckFn: () => this.adapter.ready,\n    // });\n    // this.activityMatcher.addQuerySource({\n    //   sourceName: 'callLog',\n    //   getQueriesFn: this.callLog.getSelector('callLogSessionIds'),\n    //   readyCheckFn: () => this.callLog.ready,\n    // });\n    // this.activityMatcher.addSearchSource({\n    //   sourceName: 'dynamics',\n    //   searchFn: async ({ queries }) => this.adapter.matchPhoneCalls({ sessionIds: queries }),\n    //   readyCheckFn: () => this.adapter.ready,\n    // });\n    this.addModule('callingSettings', new CallingSettings({\n      ...options,\n      alert: this.alert,\n      brand: this.brand,\n      client: this.client,\n      storage: this.storage,\n      extensionInfo: this.extensionInfo,\n      extensionPhoneNumber: this.extensionPhoneNumber,\n      forwardingNumber: this.forwardingNumber,\n      rolesAndPermissions: this.rolesAndPermissions,\n      onFirstLogin: () => {\n        this.router.history.push('/settings'); // TODO find a better solution\n      },\n      getState: () => this.state.callingSettings,\n    }));\n    this.addModule('softphone', new Softphone({\n      ...options,\n      getState: () => this.state.softphone,\n      brand: this.brand,\n    }));\n    this.addModule('ringout', new Ringout({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      getState: () => this.state.ringout,\n    }));\n    this.addModule('numberValidate', new NumberValidate({\n      ...options,\n      client: this.client,\n      accountExtension: this.accountExtension,\n      regionSettings: this.regionSettings,\n      accountInfo: this.accountInfo,\n      getState: () => this.state.numberValidate,\n    }));\n    this.addModule('call', new Call({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      callingSettings: this.callingSettings,\n      softphone: this.softphone,\n      storage: this.storage,\n      ringout: this.ringout,\n      numberValidate: this.numberValidate,\n      regionSettings: this.regionSettings,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.call,\n    }));\n    // this.addModule('autoLogger', new AutoLogger({\n    //   ...options,\n    //   storage: this.storage,\n    //   getState: () => this.state.autoLogger,\n    // }));\n    // this.autoLogger.addLogHandler({\n    //   sourceName: 'dynamics',\n    //   handlerFn: async args => this.adapter.logCallBatch(args),\n    //   readyCheckFn: () => this.adapter.ready,\n    // });\n\n    this.addModule('contactSearch', new ContactSearch({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      getState: () => this.state.contactSearch,\n    }));\n    this.contactSearch.addSearchSource({\n      sourceName: 'test',\n      searchFn: ({ searchString }) => [{\n        entityType: 'account',\n        name: searchString,\n        phoneNumber: '+1234567890',\n        phoneType: 'phone',\n      }],\n      formatFn: entities => entities,\n      readyCheckFn: () => true,\n    });\n\n    this.addModule('messageSender', new MessageSender({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      getState: () => this.state.messageSender,\n      extensionPhoneNumber: this.extensionPhoneNumber,\n      extensionInfo: this.extensionInfo,\n      numberValidate: this.numberValidate,\n    }));\n\n    this.addModule('composeText', new ComposeText({\n      ...options,\n      auth: this.auth,\n      alert: this.alert,\n      storage: this.storage,\n      getState: () => this.state.composeText,\n      messageSender: this.messageSender,\n      numberValidate: this.numberValidate,\n    }));\n\n    this.addModule('messageStore', new MessageStore({\n      ...options,\n      alert: this.alert,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      subscription: this.subscription,\n      connectivityMonitor: this.connectivityMonitor,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.messageStore,\n    }));\n\n    this.addModule('conversation', new Conversation({\n      ...options,\n      auth: this.auth,\n      messageSender: this.messageSender,\n      extensionInfo: this.extensionInfo,\n      messageStore: this.messageStore,\n      getState: () => this.state.conversation,\n    }));\n\n    this.addModule('messages', new Messages({\n      ...options,\n      auth: this.auth,\n      messageStore: this.messageStore,\n      extensionInfo: this.extensionInfo,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.messages,\n    }));\n\n    // this.addModule('adapter', new DynamicsAdapter({\n    //   ...options,\n    //   auth: this.auth,\n    //   call: this.call,\n    //   composeText: this.composeText,\n    //   locale: this.locale,\n    //   router: this.router,\n    //   presence: this.presence,\n    //   storage: this.storage,\n    //   globalStorage: this.globalStorage,\n    //   regionSettings: this.regionSettings,\n    //   getState: () => this.state.adapter,\n    // }));\n\n    this._reducer = combineReducers({\n      app: (state = {\n        name: appName,\n        version: appVersion,\n      }) => state,\n      tabManager: this.tabManager.reducer,\n      alert: this.alert.reducer,\n      auth: this.auth.reducer,\n      brand: this.brand.reducer,\n      connectivityMonitor: this.connectivityMonitor.reducer,\n      locale: this.locale.reducer,\n      subscription: this.subscription.reducer,\n      // router: this.router.reducer,\n      accountExtension: this.accountExtension.reducer,\n      accountPhoneNumber: this.accountPhoneNumber.reducer,\n      accountInfo: this.accountInfo.reducer,\n      rolesAndPermissions: this.rolesAndPermissions.reducer,\n      extensionInfo: this.extensionInfo.reducer,\n      dialingPlan: this.dialingPlan.reducer,\n      extensionPhoneNumber: this.extensionPhoneNumber.reducer,\n      forwardingNumber: this.forwardingNumber.reducer,\n      blockedNumber: this.blockedNumber.reducer,\n      regionSettings: this.regionSettings.reducer,\n      callingSettings: this.callingSettings.reducer,\n      call: this.call.reducer,\n      rateLimiter: this.rateLimiter.reducer,\n      ringout: this.ringout.reducer,\n      softphone: this.softphone.reducer,\n      // callLog: this.callLog.reducer,\n      // callMonitor: callMonitorReducer,\n      environment: this.environment.reducer,\n      presence: this.presence.reducer,\n      contactMatcher: this.contactMatcher.reducer,\n      activityMatcher: this.activityMatcher.reducer,\n      storage: this.storage.reducer,\n      // autoLogger: this.autoLogger.reducer,\n      globalStorage: this.globalStorage.reducer,\n      contactSearch: this.contactSearch.reducer,\n      numberValidate: this.numberValidate.reducer,\n      messageSender: this.messageSender.reducer,\n      composeText: this.composeText.reducer,\n      messageStore: this.messageStore.reducer,\n      conversation: this.conversation.reducer,\n      messages: this.messages.reducer,\n      // adapter: this.adapter.reducer,\n    });\n  }\n\n  get name() {\n    return this.state.app.name;\n  }\n\n  get version() {\n    return this.state.app.version;\n  }\n}\n"]}