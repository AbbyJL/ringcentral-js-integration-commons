{"version":3,"sources":["modules/AudioSettings/getStorageReducer.js"],"names":["getStorageReducer","getOutputDeviceIdReducer","types","state","type","devices","outputDeviceId","setData","setAvailableDevices","getUserMediaError","find","device","deviceId","kind","getInputDeviceIdReducer","inputDeviceId","getDialButtonVolumeReducer","dialButtonVolume","Math","min","max","getDialButtonMutedReducer","dialButtonMuted","getRingtoneVolumeReducer","ringtoneVolume","getRingtoneMutedReducer","ringtoneMuted","getCallVolumeReducer","callVolume"],"mappings":"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","file":"getStorageReducer.js","sourcesContent":["import { combineReducers } from 'redux';\r\nimport r from 'ramda';\r\n\r\nfunction getOutputDeviceIdReducer(types) {\r\n  return (state = 'default', { type, devices = [], outputDeviceId = state }) => {\r\n    switch (type) {\r\n      case types.setData:\r\n        return outputDeviceId;\r\n      case types.setAvailableDevices:\r\n      case types.getUserMediaError:\r\n        if (\r\n          r.find(device => (\r\n            device.deviceId === state &&\r\n            device.kind === 'audiooutput'\r\n          ), devices)\r\n        ) {\r\n          return state;\r\n        }\r\n        return 'default';\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n}\r\nfunction getInputDeviceIdReducer(types) {\r\n  return (state = 'default', { type, devices = [], inputDeviceId = state }) => {\r\n    switch (type) {\r\n      case types.setData:\r\n        return inputDeviceId;\r\n      case types.setAvailableDevices:\r\n      case types.getUserMediaError:\r\n        if (\r\n          r.find(device => (\r\n            device.deviceId === state &&\r\n            device.kind === 'audioinput'\r\n          ), devices)\r\n        ) {\r\n          return state;\r\n        }\r\n        return 'default';\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n}\r\n\r\nfunction getDialButtonVolumeReducer(types) {\r\n  return (state = 1, { type, dialButtonVolume = state }) => {\r\n    if (type === types.setData) {\r\n      return Math.min(1, Math.max(0, dialButtonVolume));\r\n    }\r\n    return state;\r\n  };\r\n}\r\nfunction getDialButtonMutedReducer(types) {\r\n  return (state = false, { type, dialButtonMuted = state }) => {\r\n    if (type === types.setData) {\r\n      return !!dialButtonMuted;\r\n    }\r\n    return state;\r\n  };\r\n}\r\nfunction getRingtoneVolumeReducer(types) {\r\n  return (state = 0.3, { type, ringtoneVolume = state }) => {\r\n    if (type === types.setData) {\r\n      return Math.min(1, Math.max(0, ringtoneVolume));\r\n    }\r\n    return state;\r\n  };\r\n}\r\nfunction getRingtoneMutedReducer(types) {\r\n  return (state = false, { type, ringtoneMuted = state }) => {\r\n    if (type === types.setData) {\r\n      return !!ringtoneMuted;\r\n    }\r\n    return state;\r\n  };\r\n}\r\nfunction getCallVolumeReducer(types) {\r\n  return (state = 1, { type, callVolume = state }) => {\r\n    if (type === types.setData) {\r\n      return Math.min(1, Math.max(0.1, callVolume));\r\n    }\r\n    return state;\r\n  };\r\n}\r\n\r\n\r\nexport default function getStorageReducer(types) {\r\n  return combineReducers({\r\n    dialButtonVolume: getDialButtonVolumeReducer(types),\r\n    dialButtonMuted: getDialButtonMutedReducer(types),\r\n    ringtoneVolume: getRingtoneVolumeReducer(types),\r\n    ringtoneMuted: getRingtoneMutedReducer(types),\r\n    callVolume: getCallVolumeReducer(types),\r\n    outputDeviceId: getOutputDeviceIdReducer(types),\r\n    inputDeviceId: getInputDeviceIdReducer(types),\r\n  });\r\n}\r\n"]}