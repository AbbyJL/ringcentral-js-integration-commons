{"version":3,"sources":["modules/proxy/get-proxy-client-reducer.js"],"names":["getProxyClientReducer","prefix","moduleReducer","actions","state","action","lastAction","actionNumber","module","type","sync"],"mappings":";;;;;;;;;;kBAGwBA,qB;;AAHxB;;AACA;;;;;;AAEe,SAASA,qBAAT,CAA+BC,MAA/B,EAAuCC,aAAvC,EAAsD;AACnE,MAAMC,UAAU,wDAA4BF,MAA5B,CAAhB;AACA,SAAO,UAACG,KAAD,EAAQC,MAAR,EAAmB;AACxB,QAAI,CAACD,KAAL,EAAY;AACV,aAAO;AACLE,oBAAY,IADP;AAELC,sBAAc,CAAC,CAFV;AAGLC,gBAAQN;AAHH,OAAP;AAKD;AACD,QAAI,CAACG,MAAL,EAAa;AACX,aAAOD,KAAP;AACD;AACD,YAAQC,OAAOI,IAAf;AACE,WAAKN,QAAQE,MAAb;AACE,YAAIA,OAAOE,YAAP,KAAwBH,MAAMG,YAAN,GAAqB,CAAjD,EAAoD;AAClD,iBAAO,sBACL,EADK,EAELH,KAFK,EAGL;AACEE,wBAAYD,OAAOA,MADrB;AAEEE,0BAAcF,OAAOE,YAFvB;AAGEC,oBAAQN,cAAcE,MAAMI,MAApB,EAA4BH,OAAOA,MAAnC;AAHV,WAHK,CAAP;AASD;AACD,eAAOD,KAAP;AACF,WAAKD,QAAQO,IAAb;AACE,eAAO;AACLF,kBAAQH,OAAOG,MADV;AAELF,sBAAYD,OAAOC,UAFd;AAGLC,wBAAcF,OAAOE;AAHhB,SAAP;AAKF;AACE,eAAOH,KAAP;AArBJ;AAuBD,GAlCD;AAmCD","file":"get-proxy-client-reducer.js","sourcesContent":["import { prefixActions } from '../../lib/redux-helper';\nimport proxyActions from './proxy-actions';\n\nexport default function getProxyClientReducer(prefix, moduleReducer) {\n  const actions = prefixActions(proxyActions, prefix);\n  return (state, action) => {\n    if (!state) {\n      return {\n        lastAction: null,\n        actionNumber: -1,\n        module: moduleReducer(),\n      };\n    }\n    if (!action) {\n      return state;\n    }\n    switch (action.type) {\n      case actions.action:\n        if (action.actionNumber === state.actionNumber + 1) {\n          return Object.assign(\n            {},\n            state,\n            {\n              lastAction: action.action,\n              actionNumber: action.actionNumber,\n              module: moduleReducer(state.module, action.action),\n            },\n          );\n        }\n        return state;\n      case actions.sync:\n        return {\n          module: action.module,\n          lastAction: action.lastAction,\n          actionNumber: action.actionNumber,\n        };\n      default:\n        return state;\n    }\n  };\n}\n"]}