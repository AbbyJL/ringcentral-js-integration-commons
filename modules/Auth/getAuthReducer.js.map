{"version":3,"sources":["modules/Auth/getAuthReducer.js"],"names":["getStatusReducer","getAuthStatusReducer","getOwnerIdReducer","getFreshLoginReducer","getAuthReducer","types","state","pending","type","init","initializing","initSuccess","ready","loggedIn","refreshTokenValid","login","loggingIn","loginSuccess","refreshSuccess","cancelLogout","loginError","logoutSuccess","logoutError","notLoggedIn","refreshError","logout","loggingOut","beforeLogout","token","owner_id","status","authStatus","freshLogin","ownerId"],"mappings":"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","file":"getAuthReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport authStatus from './authStatus';\nimport moduleStatus from '../../enums/moduleStatus';\n\nexport function getStatusReducer(types) {\n  return (state = moduleStatus.pending, { type }) => {\n    switch (type) {\n      case types.init:\n        return moduleStatus.initializing;\n      case types.initSuccess:\n        return moduleStatus.ready;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getAuthStatusReducer(types) {\n  return (state = null, { type, loggedIn, refreshTokenValid }) => {\n    switch (type) {\n      case types.login:\n        return authStatus.loggingIn;\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n      case types.cancelLogout:\n        return authStatus.loggedIn;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return authStatus.notLoggedIn;\n\n      case types.refreshError:\n        return refreshTokenValid ? state : authStatus.notLoggedIn;\n\n      case types.logout:\n        return authStatus.loggingOut;\n\n      case types.beforeLogout:\n        return authStatus.beforeLogout;\n\n      case types.initSuccess:\n        return loggedIn ? authStatus.loggedIn : authStatus.notLoggedIn;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getOwnerIdReducer(types) {\n  return (state = null, { type, token }) => {\n    switch (type) {\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n        return token.owner_id;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n      case types.refreshError:\n        return null;\n\n      case types.initSuccess:\n        return (token && token.owner_id) || null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getFreshLoginReducer(types) {\n  return (state = null, { type, loggedIn }) => {\n    switch (type) {\n\n      case types.initSuccess:\n        return loggedIn ? false : null;\n\n      case types.login:\n        return true;\n\n      case types.loginError:\n      case types.refreshError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getAuthReducer(types) {\n  return combineReducers({\n    status: getStatusReducer(types),\n    authStatus: getAuthStatusReducer(types),\n    freshLogin: getFreshLoginReducer(types),\n    ownerId: getOwnerIdReducer(types),\n  });\n}\n"]}