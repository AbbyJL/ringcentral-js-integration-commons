{"version":3,"sources":["modules/Auth/getAuthReducer.js"],"names":["getLoginStatusReducer","getOwnerIdReducer","getFreshLoginReducer","getAuthReducer","types","state","type","loggedIn","refreshTokenValid","login","loggingIn","loginSuccess","refreshSuccess","cancelLogout","loginError","logoutSuccess","logoutError","notLoggedIn","refreshError","logout","loggingOut","beforeLogout","initSuccess","tabSync","token","owner_id","status","loginStatus","freshLogin","ownerId"],"mappings":"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","file":"getAuthReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport loginStatus from './loginStatus';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\n\nexport function getLoginStatusReducer(types) {\n  return (state = null, { type, loggedIn, refreshTokenValid }) => {\n    switch (type) {\n      case types.login:\n        return loginStatus.loggingIn;\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n      case types.cancelLogout:\n        return loginStatus.loggedIn;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return loginStatus.notLoggedIn;\n\n      case types.refreshError:\n        return refreshTokenValid ? state : loginStatus.notLoggedIn;\n\n      case types.logout:\n        return loginStatus.loggingOut;\n\n      case types.beforeLogout:\n        return loginStatus.beforeLogout;\n\n      case types.initSuccess:\n      case types.tabSync:\n        return loggedIn ? loginStatus.loggedIn : loginStatus.notLoggedIn;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getOwnerIdReducer(types) {\n  return (state = null, { type, token, refreshTokenValid }) => {\n    switch (type) {\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n        return token.owner_id;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return null;\n\n      case types.refreshError:\n        return refreshTokenValid ? state : null;\n\n      case types.initSuccess:\n      case types.tabSync:\n        return (token && token.owner_id) || null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getFreshLoginReducer(types) {\n  return (state = null, { type, loggedIn }) => {\n    switch (type) {\n\n      case types.initSuccess:\n      case types.tabSync:\n        return loggedIn ? false : null;\n\n      case types.login:\n        return true;\n\n      case types.loginError:\n      case types.refreshError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getAuthReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    loginStatus: getLoginStatusReducer(types),\n    freshLogin: getFreshLoginReducer(types),\n    ownerId: getOwnerIdReducer(types),\n  });\n}\n"]}