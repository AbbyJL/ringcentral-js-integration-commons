{"version":3,"sources":["modules/storage/get-storage-reducer.js"],"names":["getStorageReducer","prefix","actions","state","action","data","key","status","pending","error","type","init","update","dirty","save","saving","saveSuccess","saved","saveError","reload","reloading","reloadSuccess","reloadError","reset"],"mappings":";;;;;;;;;;kBAIwBA,iB;;AAJxB;;AACA;;;;AACA;;;;;;AAEe,SAASA,iBAAT,CAA2BC,MAA3B,EAAmC;AAChD,MAAMC,UAAU,0DAA8BD,MAA9B,CAAhB;AACA,SAAO,UAACE,KAAD,EAAQC,MAAR,EAAmB;AACxB,QAAI,CAACD,KAAL,EAAY;AACV,aAAO;AACLE,cAAM,EADD;AAELC,aAAK,IAFA;AAGLC,gBAAQ,wBAAcC,OAHjB;AAILC,eAAO;AAJF,OAAP;AAMD;AACD,QAAI,CAACL,MAAL,EAAa;AACX,aAAOD,KAAP;AACD;AACD,YAAQC,OAAOM,IAAf;;AAEE,WAAKR,QAAQS,IAAb;AACE,eAAO;AACLN,gBAAMD,OAAOC,IADR;AAELC,eAAKF,OAAOE,GAFP;AAGLC,kBAAQH,OAAOG,MAHV;AAILE,iBAAOL,OAAOK;AAJT,SAAP;;AAOF,WAAKP,QAAQU,MAAb;AACE,0CACKT,KADL;AAEEE,2CACKF,MAAME,IADX,EAEKD,OAAOC,IAFZ,CAFF;AAMEE,kBAAQ,wBAAcM;AANxB;;AASF,WAAKX,QAAQY,IAAb;AACE,0CACKX,KADL;AAEEI,kBAAQ,wBAAcQ;AAFxB;;AAKF,WAAKb,QAAQc,WAAb;AACE,0CACKb,KADL;AAEEI,kBAAQ,wBAAcU;AAFxB;;AAKF,WAAKf,QAAQgB,SAAb;AACE,0CACKf,KADL;AAEEI,kBAAQ,wBAAcM;AAFxB;;AAKF,WAAKX,QAAQiB,MAAb;AACE,0CACKhB,KADL;AAEEI,kBAAQ,wBAAca;AAFxB;;AAKF,WAAKlB,QAAQmB,aAAb;AACE,0CACKlB,KADL;AAEEE,gBAAMD,OAAOC,IAFf;AAGEE,kBAAQ,wBAAcU;AAHxB;;AAMF,WAAKf,QAAQoB,WAAb;AACE,0CACKnB,KADL;AAEEM,iBAAOL,OAAOK,KAFhB;AAGEF,kBAAQ,wBAAcM;AAHxB;;AAMF,WAAKX,QAAQqB,KAAb;AACE,eAAO;AACLhB,kBAAQ,wBAAcC,OADjB;AAELH,gBAAM,EAFD;AAGLC,eAAK,IAHA;AAILG,iBAAO;AAJF,SAAP;;AAOF;AACE,eAAON,KAAP;AAnEJ;AAqED,GAjFD;AAkFD","file":"get-storage-reducer.js","sourcesContent":["import { prefixActions } from '../../lib/redux-helper';\nimport storageActions from './storage-actions';\nimport storageStatus from './storage-status';\n\nexport default function getStorageReducer(prefix) {\n  const actions = prefixActions(storageActions, prefix);\n  return (state, action) => {\n    if (!state) {\n      return {\n        data: {},\n        key: null,\n        status: storageStatus.pending,\n        error: null,\n      };\n    }\n    if (!action) {\n      return state;\n    }\n    switch (action.type) {\n\n      case actions.init:\n        return {\n          data: action.data,\n          key: action.key,\n          status: action.status,\n          error: action.error,\n        };\n\n      case actions.update:\n        return {\n          ...state,\n          data: {\n            ...state.data,\n            ...action.data,\n          },\n          status: storageStatus.dirty,\n        };\n\n      case actions.save:\n        return {\n          ...state,\n          status: storageStatus.saving,\n        };\n\n      case actions.saveSuccess:\n        return {\n          ...state,\n          status: storageStatus.saved,\n        };\n\n      case actions.saveError:\n        return {\n          ...state,\n          status: storageStatus.dirty,\n        };\n\n      case actions.reload:\n        return {\n          ...state,\n          status: storageStatus.reloading,\n        };\n\n      case actions.reloadSuccess:\n        return {\n          ...state,\n          data: action.data,\n          status: storageStatus.saved,\n        };\n\n      case actions.reloadError:\n        return {\n          ...state,\n          error: action.error,\n          status: storageStatus.dirty,\n        };\n\n      case actions.reset:\n        return {\n          status: storageStatus.pending,\n          data: {},\n          key: null,\n          error: null,\n        };\n\n      default:\n        return state;\n    }\n  };\n}\n"]}