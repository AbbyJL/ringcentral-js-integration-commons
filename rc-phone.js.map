{"version":3,"sources":["rc-phone.js"],"names":["REDUCER","RcPhone","options","getState","prefix","sdkSettings","defaultBrand","cachePrefix","sdk","platform","state","auth","settings","subscription","api","user","webphone","reducer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,IAAMA,UAAU,uBAAhB;;IAGqBC,O;;;AACnB,mBAAYC,OAAZ,EAAqB;AAAA;AAAA,QAEjBC,QAFiB,GAMfD,OANe,CAEjBC,QAFiB;AAAA,0BAMfD,OANe,CAGjBE,MAHiB;AAAA,QAGjBA,MAHiB,mCAGR,IAHQ;AAAA,QAIjBC,WAJiB,GAMfH,OANe,CAIjBG,WAJiB;AAAA,QAKjBC,YALiB,GAMfJ,OANe,CAKjBI,YALiB;;AAAA,wIAOb;AACJH;AADI,KAPa;;AAUnB,oCAAgB,KAAhB,EAAuB;;AAErBI,mBAAgBH,MAAhB;AAFqB,OAGlBC,WAHkB,EAAvB;;AAMA,oCAAgB,UAAhB,EAA4B,MAAKG,GAAL,CAASC,QAAT,EAA5B;;AAEA,oCAAgB,KAAhB,EAAuB,gCAAsB,MAAKD,GAA3B,CAAvB;;AAEA,oCAAgB,MAAhB,EAAwB,mBAAS;AAC/BL,gBAAU;AAAA,eAAM,MAAKO,KAAL,CAAWC,IAAjB;AAAA,OADqB;AAE/BP,oBAF+B;AAG/BK,gBAAU,MAAKA;AAHgB,KAAT,CAAxB;;AAMA,oCAAgB,UAAhB,EAA4B,uBAAa;AACvCN,gBAAU;AAAA,eAAM,MAAKO,KAAL,CAAWE,QAAjB;AAAA;AAD6B,KAAb,CAA5B;;AAIA,oCAAgB,cAAhB,EAAgC;AAC9BR,cAAWA,MAAX,aAD8B;AAE9BD,gBAAU;AAAA,eAAM,MAAKO,KAAL,CAAWJ,YAAjB;AAAA;AAFoB,OAG3BA,YAH2B,EAAhC;;AAMA,oCAAgB,cAAhB,EAAgC,2BAAiB;AAC/CH,gBAAU;AAAA,eAAM,MAAKO,KAAL,CAAWG,YAAjB;AAAA,OADqC;AAE/CT,oBAF+C;AAG/CU,WAAK,MAAKA,GAHqC;AAI/CL,gBAAU,MAAKA,QAJgC;AAK/CD,WAAK,MAAKA,GALqC;AAM/CG,YAAM,MAAKA;AANoC,KAAjB,CAAhC;;AASA,oCAAgB,MAAhB,EAAwB,mBAAS;AAC/BR,gBAAU;AAAA,eAAM,MAAKO,KAAL,CAAWK,IAAjB;AAAA,OADqB;AAE/BX,oBAF+B;AAG/BU,WAAK,MAAKA,GAHqB;AAI/BL,gBAAU,MAAKA,QAJgB;AAK/BG,gBAAU,MAAKA;AALgB,KAAT,CAAxB;;AAQA,oCAAgB,UAAhB,EAA4B,uBAAa;AACvCT,gBAAU;AAAA,eAAM,MAAKO,KAAL,CAAWM,QAAjB;AAAA,OAD6B;AAEvCZ,oBAFuC;AAGvCU,WAAK,MAAKA,GAH6B;AAIvCL,gBAAU,MAAKA,QAJwB;AAKvCG,gBAAU,MAAKA,QALwB;AAMvCD,YAAM,MAAKA;AAN4B,KAAb,CAA5B;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAKX,OAAL,IAAgB,4BAAgB;AAC9BW,YAAM,MAAKA,IAAL,CAAUM,OADc;AAE9BX,oBAAc,MAAKA,YAAL,CAAkBW,OAFF;AAG9BJ,oBAAc,MAAKA,YAAL,CAAkBI,OAHF;AAI9BF,YAAM,MAAKA,IAAL,CAAUE,OAJc;AAK9BD,gBAAU,MAAKA,QAAL,CAAcC,OALM;AAM9B;AACAL,gBAAU,MAAKA,QAAL,CAAcK;AAPM,KAAhB,CAAhB;AAvEmB;AAgFpB;;;;wBACa;AACZ,aAAO,KAAKjB,OAAL,CAAP;AACD;;;;;kBApFkBC,O","file":"rc-phone.js","sourcesContent":["import RingCentral from 'ringcentral';\nimport RingCentralClient from 'ringcentral-client';\n\nimport RcModule, { addModule } from './lib/rc-module';\n\nimport Settings from './modules/settings';\nimport Brand from './modules/brand';\nimport Auth from './modules/auth';\nimport Subscription from './modules/subscription';\nimport User from './modules/user';\nimport Webphone from './modules/webphone';\nimport Contact from './modules/contact';\nimport { combineReducers } from 'redux';\n\nconst REDUCER = Symbol();\n\n\nexport default class RcPhone extends RcModule {\n  constructor(options) {\n    const {\n      getState,\n      prefix = 'rc',\n      sdkSettings,\n      defaultBrand,\n    } = options;\n    super({\n      getState,\n    });\n    this::addModule('sdk', new RingCentral({\n\n      cachePrefix: `${prefix}-`,\n      ...sdkSettings,\n    }));\n\n    this::addModule('platform', this.sdk.platform());\n\n    this::addModule('api', new RingCentralClient(this.sdk));\n\n    this::addModule('auth', new Auth({\n      getState: () => this.state.auth,\n      prefix,\n      platform: this.platform,\n    }));\n\n    this::addModule('settings', new Settings({\n      getState: () => this.state.settings,\n    }));\n\n    this::addModule('defaultBrand', new Brand({\n      prefix: `${prefix}-default`,\n      getState: () => this.state.defaultBrand,\n      ...defaultBrand,\n    }));\n\n    this::addModule('subscription', new Subscription({\n      getState: () => this.state.subscription,\n      prefix,\n      api: this.api,\n      platform: this.platform,\n      sdk: this.sdk,\n      auth: this.auth,\n    }));\n\n    this::addModule('user', new User({\n      getState: () => this.state.user,\n      prefix,\n      api: this.api,\n      platform: this.platform,\n      settings: this.settings,\n    }));\n\n    this::addModule('webphone', new Webphone({\n      getState: () => this.state.webphone,\n      prefix,\n      api: this.api,\n      platform: this.platform,\n      settings: this.settings,\n      auth: this.auth,\n    }));\n\n    // this::addModule('contact', new Contact({\n    //   getState: () => this.state.contact,\n    //   prefix,\n    //   api: this.api,\n    //   platform: this.platform,\n    //   settings: this.settings,\n    // }));\n\n    // combine reducers\n    this[REDUCER] = combineReducers({\n      auth: this.auth.reducer,\n      defaultBrand: this.defaultBrand.reducer,\n      subscription: this.subscription.reducer,\n      user: this.user.reducer,\n      webphone: this.webphone.reducer,\n      // contact: this.contact.reducer,\n      settings: this.settings.reducer,\n    });\n  }\n  get reducer() {\n    return this[REDUCER];\n  }\n}\n"]}